<!DOCTYPE html>
<html lang="zh" data-darkmode="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的算法书 - </title>
    <meta name="description" content="这是一本关于算法的书">
    <meta name="author" content="rainboy">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lxgw-wenkai-web/1.520.0/style.min.css" integrity="sha512-VqbHLQtJ5icD77Z4HH8NsrtoRJlTAkOKdSrymwYZtZ1Ipbit8L/Pp8RIeHS2vpNk2bVOszUUDotVl7sK403sjw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/markdown.css">
    <link rel="stylesheet" href="/prism-theme/prism-tomorrow.css">
</head>
<body>
    <aside class="panel">
    <ul class="panel-list">
      <li><a href="/"><i class="fa fa-home"></i></a></li>
      <li><a href="javascript:void(0);" onclick="showMenuModal()"><i class="fa fa-list"></i></a></li>
    </ul>
    <ul class="panel-list">
      <li><input type="radio" class="J_darkMode" value="auto" name="darkmode" id="darkmode-auto" checked=""><label for="darkmode-auto"><i class="fa fa-adjust"></i></label></li>
      <li><input type="radio" class="J_darkMode" value="light" name="darkmode" id="darkmode-light"><label for="darkmode-light"><i class="fa fa-sun-o"></i></label></li>
      <li><input type="radio" class="J_darkMode" value="dark" name="darkmode" id="darkmode-dark"><label for="darkmode-dark"><i class="fa fa-moon-o"></i></label></li>
    </ul>
  </aside>
    <div id="modal-menu" class="modal-menu" style="display:none;">
  <div class="modal-menu-mask" onclick="hideMenuModal()"></div>
  <div class="modal-menu-content">
    <button class="modal-menu-close" onclick="hideMenuModal()">×</button>
    <h2>目录</h2>
    

<div class="chapter-list">
  
  
  <ul>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="base">基础</a>
        

        
          
  
  <ul>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="base/double_point/index.html">双指针</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="base/binary_search/index.html">二分查找</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="base/sparse_table/index.html">ST稀疏表</a>
        

        

      </li>
    
  </ul>
  

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="chapter2">第二章</a>
        

        
          
  
  <ul>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="chapter2/chapter2-1">第一节</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="chapter2/chapter2-2">第二节</a>
        

        

      </li>
    
  </ul>
  

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="chapter3">第三章 动态规划</a>
        

        
          
  
  <ul>
    
      
      <li>
        
          <a href="javascript:void(0);" class="menu-info">
            <span>
              
                <span class="svg-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 128 128"><path fill="#c62828" d="m31.37 26.45l.17-18.43L40 5.43l9.75 16.73z"/><path fill="#37474f" d="M36.76 20.48s-2.6-11.89.34-13.07c5.23-2.09 9.31 11.65 9.31 11.65z" opacity="0.59"/><path fill="#f44336" d="M20.59 32.81c-.09-1.63-2.29-14.63 1.05-21.88c1.53-3.31 7.81-5.51 13.43-6.76c1.39-.31 4.98-.51 7.21 2.05c2.01 2.31 4.98 7.37 7.91 15l-2.11 4.54s-2.91-7.7-5.82-14.06c-2.41-5.27-5.47-3.52-5.78-2.29c-.56 2.26 2.3 14.51 2.3 14.51c-4.16 1.77-18.19 8.89-18.19 8.89"/><path fill="#455a64" d="m42.36 17.37l1.75-8.5L51 4.88l8.29.02l6.9 5.59l1.91 10.9l-8.33-2.81l-1.13-7.81l-7.64-.19l-1.02 6.21z"/><path fill="#ff7555" d="M35.06 4.18c-5.62 1.24-11.27 3.03-13.43 6.76c-1.24 2.14-1.96 7.75-1.82 12.96c1.09-1.72 5.54-4.69 8.86-6.13c3.31-1.44 3.69-2.87 3.74-3.5c.25-2.86.01-5.22.85-7.24c1.06-2.56 2.57-2.88 3.45-3.01c-.67 0-1.26.07-1.65.16m4.53.28c-.54-.19-1.08-.31-1.6-.37c.54.14 1.07.32 1.6.37"/><path fill="none" stroke="#784d30" stroke-miterlimit="10" stroke-width="9.816" d="M89.99 109.24c14.88-3.95 19.32-20.76 23.54-22.17"/><path fill="#c62828" d="M104.48 74.9c1.09 7.09 3.23 7.62 6.96 7.43c5.65-.28 6.27-1.58 7.53-11.26c1.56-12.02-2.95-28.77-6.84-40.25c-2.06-6.08-1.85-10.25-6.44-14.89c-2.52-2.55-12.33-6.3-15.18-1.42c-1.96 3.36-.98 6.77.89 9.47c5.43 7.86 10.43 33.77 13.08 50.92"/><path fill="#37474f" d="M93.06 26.91c1.04 2.13 2.11 4.89 2.98 8c8.86-.27 18.46 3.98 18.46 3.72c0-.22-.75-5.99-3.19-11.71c-1.06-2.48-4.29-9.28-8.29-8.62c-5.03.84-9.96 8.61-9.96 8.61" opacity="0.59"/><path fill="#f44336" d="M85.95 39.19c2.61-5.58 12.26-19.78 17.81-20.24c2.75-.23 5.84 5.46 6.97 8.57c3.17 8.73 6.62 22.43 7.63 36.73c.63 8.92-1 16.02-4.36 18.97c12.88-2.41 7.85-30.52 6.76-36.34c-3.67-19.49-8.48-26.84-12.17-30.77c-2.82-3-15.1-9.35-21.58-9.05c-4.99.23-15.91 9.56-18.89 14.73c-.88 1.52 17.83 17.4 17.83 17.4"/><path fill="#ff7555" d="M68.66 123.73c16.9-1.34 27.59-10.84 28.71-19.85c3.86-31.14-3.77-76.17-34.16-84.9c-3.39-.97-9.35-2.25-14.53-2.25c-6.03 0-15.33 1.27-22.01 5.85c-12.18 8.36-15.43 20.26-16.23 26.16c-2.95 21.63 36.96 76.68 58.22 74.99"/><path fill="#c62828" d="M97.37 103.88c2.01-16.2.91-36.15-4.89-52.81c-3.02-3.9-6.38-5.73-9.16-4.83c-3.34 1.08-6.27 5.53-5.21 10.01c0 0 8.09 32.46 2.59 52.99c-3.64 13.59-13.23 14.52-13.23 14.52c.4 0 .8 0 1.19-.03c16.91-1.34 27.59-10.84 28.71-19.85"/><path fill="#f44336" d="M18.62 120.38c5.1 1.61 18.51 3.62 42.26 3.62c21.33 0 21.18-7.59 22.94-16.5c3.62-18.38-1.34-78.26-38.49-79.55C12.84 26.81 9.59 45.89 7.14 66.61c-2.56 21.67-1.96 29.78-.72 38.61c1.61 11.54 8.69 14.05 12.2 15.16"/><path fill="#37474f" d="M90.05 59.81c-.86-4.52-2.08-9.49-4.09-14.34l-2.42.11c1.81 4.11 3.31 8.94 4.39 14.63c3.45 18.23 3.85 30.45 3.67 37.08c-.11 3.98 2.08 4 2.19-.25c.17-6.81-.29-18.99-3.74-37.23"/><path fill="#e2a610" d="M92.53 95.21a2.626 2.626 0 0 0-1.73 2.92l1.3 7.54a2.19 2.19 0 0 0 3.17 1.64l3.62-1.85c1.18-.6 1.56-2.11.81-3.2l-4.17-6.06a2.62 2.62 0 0 0-3-.99"/><path fill="#ffca28" d="M94.23 105.83c-.18-.33-1.14-5.47-1.43-7.81c-.32-2.63.81-2.78.98-2.92a2.62 2.62 0 0 0-2.99 3.03l1.3 7.54c.15 1.03.96 1.75 1.89 1.87c.42.05.86-.01 1.28-.23l.84-.43c-.04-.01-1.28.03-1.87-1.05"/><path fill="#546e7a" d="m119.95 92.13l-9.34.83c-.86.08-1.63-.56-1.7-1.43l-.71-7.93c-.08-.86.56-1.63 1.43-1.7l9.34-.83c.86-.08 1.63.56 1.7 1.43l.71 7.93c.07.86-.57 1.62-1.43 1.7"/><path fill="#37474f" d="m117.41 92.43l-8.84.79c-.86.08-1.63-.56-1.7-1.43l-.72-8.09c-.08-.86.56-1.63 1.43-1.7l8.84-.79c.86-.08 1.63.56 1.7 1.43l.72 8.09c.07.86-.57 1.62-1.43 1.7"/><path fill="#a06841" d="m111.28 101.56l-2.71-14.28c-.05-.24.12-.47.37-.49l7.13-.72c.2-.02.39.11.44.31l3.52 13.18c.23.86-.3 1.75-1.17 1.95l-5.68 1.3c-.87.19-1.74-.37-1.9-1.25"/><path fill="#fff59d" d="m49.47 58.81l-15.43-.46c-1.35 0-2.45-1.1-2.45-2.45l.21-7.94c0-1.33 1.06-2.42 2.39-2.45l15.26.41a2.453 2.453 0 0 1 2.52 2.4l-.03 7.99c.01 1.37-1.09 2.5-2.47 2.5" opacity="0.65"/><path fill="#ff7555" d="M87.01 7.05c-3.78.12-11.09 5.62-15.58 10.49c2.32-.19 7.81 2.38 12.37 5.9c.91.7 3.15.57 4.61-1c1.33-1.43 2.58-2.53 3.92-3.95c7.86-8.33 14.04-4.2 14.04-4.2c-6.5-4.23-14.42-7.39-19.36-7.24"/><path fill="#546e7a" d="M86.27 46.23C81.34 33.91 71.39 22.06 49.65 20.1c-15.1-1.36-25.27 5.65-29.41 8.19c-.92.56-1.95 1.26-2.65 2.22c-.89 1.22-1.01 2.22-1.01 2.22s13.1-12.23 32.87-10.48c11.3 1 26.14 4.77 34.31 23.87c.69-.17 1.62-.07 2.51.11"/><path fill="#ff7555" d="M69.35 114.25s-15.98 1.11-33.95.13c-9.47-.52-16.41-1.88-17.82-3.71c-1.74-2.26-3.8-4.45-3.8-16.07c0-7.83 2.89-14.14 8.49-14.28c4.28-.11 49.21-.6 45.82-.6s-6.45 7.43-6.14 15.44c.76 19.63 7.4 19.09 7.4 19.09"/><path fill="#ff7555" d="M53.67 94.6c.35-.1 3.53.18 6.07-1.59c.96-.67 1.72-1.23 2.33-1.87c.59-6 2.95-10.89 5.59-11.37c.09-.02.18-.04.26-.05c-3.92.08-35.97-1.1-45.98-.95c-4.64.07-8.22 5.53-7.9 11.95c.67 1.19 1.75 2.47 3.4 2.72c3.24.49 35.88 1.27 36.23 1.16"/><path fill="#fff59d" d="M53.67 94.6c.35-.1 3.53.18 6.07-1.59c.96-.67 1.72-1.23 2.33-1.87c.59-6 2.95-10.89 5.59-11.37c.09-.02.18-.04.26-.05c-3.92.08-35.97-1.1-45.98-.95c-4.64.07-8.22 5.53-7.9 11.95c.67 1.19 1.75 2.47 3.4 2.72c3.24.49 35.88 1.27 36.23 1.16" opacity="0.45"/><path fill="#c62828" d="M74.42 89.7c-.34-5.22-1.57-7.7-2.69-8.88c-1.03-1.1-2.64-1.19-4.93-1.08c-1.42.07-4.01 1.43-5.1 9.46v-.01c-.86 1.95-3.11 3.89-6.84 3.89l-35.75-1.16c-3.58-.23-4.89-3.65-5.06-3.96c0 0-.52 2.41-.03 3.94c.62 1.92 2.9 3.06 5.09 3.06l35.75 1.16c2.85 0 5.02-1.13 6.42-2.18q-.09 1.86-.09 4.05c0 15.36 4.43 16.52 7.26 16.39c2.83-.14 5.6-1.22 6.05-3.73c.64-3.51.57-10.89-.08-20.95"/></svg> </span>
              
             背包 
            </span>
          </a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="chapter3/knapsack/01-knapsack">01背包</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="chapter3/knapsack/multiple-knapsack">多重背包</a>
        

        

      </li>
    
      
      <li>
        
          <a href="javascript:void(0);" class="menu-info">
            <span>
              
                <span class="svg-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path fill="#00bcd4" d="M19 22h10v20H19zM32 8h10v34H32zM6 30h10v12H6z"/><g fill="#3f51b5"><path d="m11 8l10 10V8z"/><path d="m9.394 22.437l-2.828-2.828l9.969-9.969l2.828 2.828z"/></g></svg> </span>
              
             线性动态规划 
            </span>
          </a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="chapter3/linear/lcs">lcs</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="chapter3/linear/lis">lis</a>
        

        

      </li>
    
      
      <li>
        
          <a href="javascript:void(0);" class="menu-info">
            <span>
              
                <span class="svg-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><path fill="#000" d="M16 120h480V16H16Zm32-72h416v40H48Zm192 96H16v96h224Zm-32 64H48v-32h160Zm64 32h224v-96H272Zm32-64h160v32H304Zm-152 96H16v88h136Zm-32 56H48v-24h72Zm72 32h128v-88H192Zm32-56h64v24h-64Zm136 56h136v-88H360Zm32-56h72v24h-72ZM121.442 443.278A52.721 52.721 0 1 0 68.722 496a52.78 52.78 0 0 0 52.72-52.722m-73.442 0A20.721 20.721 0 1 1 68.722 464A20.745 20.745 0 0 1 48 443.278m92.853 0a52.721 52.721 0 1 0 52.721-52.72a52.78 52.78 0 0 0-52.721 52.72m73.442 0a20.721 20.721 0 1 1-20.721-20.72a20.745 20.745 0 0 1 20.726 20.72Zm51.41 0a52.721 52.721 0 1 0 52.721-52.72a52.78 52.78 0 0 0-52.721 52.72m73.442 0a20.721 20.721 0 1 1-20.721-20.72a20.745 20.745 0 0 1 20.721 20.72m104.131-52.72A52.721 52.721 0 1 0 496 443.278a52.78 52.78 0 0 0-52.722-52.72m0 73.442A20.721 20.721 0 1 1 464 443.278A20.745 20.745 0 0 1 443.278 464"/></svg> </span>
              
             区间动态规划 
            </span>
          </a>
        

        

      </li>
    
      
      <li>
        
          <a href="javascript:void(0);" class="menu-info">
            <span>
              
                <span class="svg-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path fill="currentColor" d="M7 8H5V7H4V6H3V4h6v2H8v1H7m-4 5H1v-2h2m9 2H9v-2h3m9 2h-3v-2h3M7 13H5v-1H4v-2h1V9h2v1h1v2H7m9 1h-2v-1h-1v-2h1V9h2v1h1v2h-1m2 6h-6v-2h1v-1h1v-1h2v1h1v1h1Z"/></svg> </span>
              
             动态规划优化 
            </span>
          </a>
        

        

      </li>
    
  </ul>
  

        

      </li>
    
      
      <li>
        
          <i class="fa fa-folder-open-o"></i>
          <a href="javascript:void(0);" class="menu-no-link">第四章 数据结构</a>
        

        
          
  
  <ul>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="data-structure/binary-indexed-tree">树状数组</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="data-structure/segment-tree">线段树</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="data-structure/stack">栈</a>
        

        
          
  
  <ul>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="data-structure/stack/表达式">表达式求值</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="data-structure/stack/monotonic-stack">单调栈</a>
        

        

      </li>
    
  </ul>
  

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="data-structure/BST">二叉搜索树</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="data-structure/RBTree">红黑树</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="data-structure/AVL">AVL</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="data-structure/fhq-treap">FHQ-Treap</a>
        

        

      </li>
    
  </ul>
  

        

      </li>
    
      
      <li>
        
          <i class="fa fa-folder-open-o"></i>
          <a href="javascript:void(0);" class="menu-no-link">第五章 图论</a>
        

        
          
  
  <ul>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="graph/diameter_of_tree">树的直径</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="graph/center_of_tree">树的中心</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="graph/pseudotree">基环树</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="graph/kruskal">Kruskal</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="graph/floyed">floyed算法</a>
        

        

      </li>
    
  </ul>
  

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="string">字符串</a>
        

        
          
  
  <ul>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="string/最小表示法/index.html">最小表示法</a>
        

        

      </li>
    
  </ul>
  

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="math">数学</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="thinkMind">思维方式</a>
        

        
          
  
  <ul>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="thinkMind/index.html">总结</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="thinkMind/约束松弛.html">约束松弛</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="thinkMind/特例化-归纳.html">特例化-归纳</a>
        

        

      </li>
    
  </ul>
  

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="math">数学</a>
        

        
          
  
  <ul>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="math/向上取整.html">向上取整</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="math/log.html">对数</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="math/集合.html">集合</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="math/反证法.html">反证法</a>
        

        

      </li>
    
      
      <li>
        
          <a href="javascript:void(0);" class="menu-info">
            <span>
              
                <span class="svg-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none"><path d="m12 3l4.33 6.75H7.67zM3 14h7v7H3zm18 3.5a3.5 3.5 0 1 1-7 0a3.5 3.5 0 0 1 7 0"/><path stroke="currentColor" stroke-linecap="square" stroke-width="2" d="m12 3l4.33 6.75H7.67zM3 14h7v7H3zm18 3.5a3.5 3.5 0 1 1-7 0a3.5 3.5 0 0 1 7 0Z"/></g></svg> </span>
              
             组合数学 
            </span>
          </a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="math/combinatorics/112_combinatorial_problems/index.html">112个组合问题</a>
        

        

      </li>
    
  </ul>
  

        

      </li>
    
      
      <li>
        
          <i class="fa fa-folder-open-o"></i>
          <a href="javascript:void(0);" class="menu-no-link">附录</a>
        

        
          
  
  <ul>
    
      
      <li>
        
          <a href="javascript:void(0);" class="menu-info">
            <span>
              
                <span class="svg-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22"/></svg> </span>
              
             技巧 
            </span>
          </a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/tricks/quickIO.html">quickIO</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/tricks/assert的使用.html">assert断言的使用</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/tricks/写题步奏.html">写题步奏</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/tricks/macos.html">macos下使用万能头文件</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/tricks/常用命令.html">常用命令</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/tricks/常用变量名.html">常用变量名</a>
        

        

      </li>
    
      
      <li>
        
          <a href="javascript:void(0);" class="menu-info">
            <span>
              
                <span class="svg-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#0065a9" d="m29.01 5.03l-5.766-2.776a1.74 1.74 0 0 0-1.989.338L2.38 19.8a1.166 1.166 0 0 0-.08 1.647q.037.04.077.077l1.541 1.4a1.165 1.165 0 0 0 1.489.066L28.142 5.75A1.158 1.158 0 0 1 30 6.672v-.067a1.75 1.75 0 0 0-.99-1.575"/><path fill="#007acc" d="m29.01 26.97l-5.766 2.777a1.745 1.745 0 0 1-1.989-.338L2.38 12.2a1.166 1.166 0 0 1-.08-1.647q.037-.04.077-.077l1.541-1.4A1.165 1.165 0 0 1 5.41 9.01l22.732 17.24A1.158 1.158 0 0 0 30 25.328v.072a1.75 1.75 0 0 1-.99 1.57"/><path fill="#1f9cf0" d="M23.244 29.747a1.745 1.745 0 0 1-1.989-.338A1.025 1.025 0 0 0 23 28.684V3.316a1.024 1.024 0 0 0-1.749-.724a1.74 1.74 0 0 1 1.989-.339l5.765 2.772A1.75 1.75 0 0 1 30 6.6v18.8a1.75 1.75 0 0 1-.991 1.576Z"/></svg> </span>
              
             vscode 
            </span>
          </a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/vscode/如何调试.html">如何调试</a>
        

        

      </li>
    
      
      <li>
        
          <a href="javascript:void(0);" class="menu-info">
            <span>
              
                <span class="svg-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="#000"><path d="m3.463 12.86l-.005-.07zm7.264.69l-3.034-3.049l1.014-1.014l3.209 3.225l3.163-3.163l1.014 1.014l-3.034 3.034l3.034 3.05l-1.014 1.014l-3.209-3.225L8.707 17.6l-1.014-1.014l3.034-3.034z"/><path fill-rule="evenodd" d="M16.933 5.003V6h1.345l2.843-2.842l1.014 1.014l-2.692 2.691l.033.085a13.8 13.8 0 0 1 .885 4.912q0 .503-.034.995l-.005.075h3.54v1.434h-3.72l-.01.058c-.303 1.653-.891 3.16-1.692 4.429l-.06.094l3.423 3.44l-1.017 1.012l-3.274-3.29l-.099.11c-1.479 1.654-3.395 2.646-5.483 2.646c-2.12 0-4.063-1.023-5.552-2.723l-.098-.113l-3.209 3.208l-1.014-1.014l3.366-3.365l-.059-.095c-.772-1.25-1.34-2.725-1.636-4.34l-.01-.057H0V12.93h3.538l-.005-.075a14 14 0 0 1-.034-.995c0-1.743.31-3.39.863-4.854l.032-.084l-2.762-2.776L2.65 3.135L5.5 6h1.427v-.997a5.003 5.003 0 0 1 10.006 0m-8.572 0V6H15.5v-.997a3.569 3.569 0 0 0-7.138 0zm9.8 2.522l-.034-.09H5.733l-.034.09a12.3 12.3 0 0 0-.766 4.335c0 2.76.862 5.201 2.184 6.92c1.32 1.716 3.036 2.649 4.813 2.649s3.492-.933 4.813-2.65c1.322-1.718 2.184-4.16 2.184-6.919c0-1.574-.28-3.044-.766-4.335" clip-rule="evenodd"/></g></svg> </span>
              
             lldb的使用 
            </span>
          </a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/lldb/lldb如何调试.html">lldb如何调试</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/lldb/lldb实现display命令.html">lldb实现display命令</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/lldb/lldbinit.html">lldbinit使用</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/gdb/lldbpython脚本入门.html">lldbpython脚本入门</a>
        

        

      </li>
    
      
      <li>
        
          <i class="fa fa-file-text"></i>
          <a href="appendix/software/常用软件.html">常用软件</a>
        

        

      </li>
    
  </ul>
  

        

      </li>
    
  </ul>
  

</div>


  </div>
</div>
<script>
function showMenuModal() {
  document.getElementById('modal-menu').style.display = 'block';
}
function hideMenuModal() {
  document.getElementById('modal-menu').style.display = 'none';
}
</script>

    <main>
        
<article class="page">
    <header class="page-header">
        <h1></h1>
    </header>
    
    <div class="container">
        <div class="heti markdown-body">
    <p>好的，我们来详细讲解 AVL 树。这是一种非常重要的自平衡二叉搜索树（BST）。</p>
<blockquote>
<p>用于读多写少的场景（查询更快）</p>
</blockquote>
<p>一、核心定义：什么是 AVL 树？</p>
<p>AVL 树是最早被发明的自平衡二叉搜索树。它的命名来源于其发明者 G. M. Adelson-Velsky 和 E. M. Landis。</p>
<p>在普通的二叉搜索树中，如果插入的序列是有序的（如 1, 2, 3, 4, 5），树会退化成一条链表，搜索时间复杂度会从理想的 O(log n) 恶化到 O(n)。</p>
<p>AVL 树通过在插入和删除元素后立即进行旋转操作来重新平衡自身，从而确保树的高度始终保持在对数范围内，保证了搜索、插入和删除操作的时间复杂度都是 O(log n)。</p>
<p>AVL 树的核心特性：对于树中的每一个节点，其左子树和右子树的高度差（平衡因子）的绝对值不超过 1。</p>
<hr>
<p>二、核心概念：平衡因子</p>
<p>要理解 AVL 树，必须先理解平衡因子。</p>
<p>· 平衡因子 = 左子树高度 - 右子树高度
· 高度：从一个节点到其最远叶子节点的最长路径上的边数。叶子节点的高度为 0，空节点的高度通常定义为 -1。</p>
<p>对于一个 AVL 树中的任意节点，其平衡因子只能是以下三个值之一：</p>
<p>· -1：右子树比左子树高 1。
· 0：左子树和右子树一样高。
· 1：左子树比右子树高 1。</p>
<p>如果任何一个节点的平衡因子不在这个范围内（即绝对值大于 1），那么这个节点就是不平衡的，需要被重新平衡。</p>
<hr>
<p>三、失衡与旋转</p>
<p>当插入或删除一个节点后，可能会破坏 AVL 树的平衡条件。我们需要从新插入/删除的节点开始，向上回溯到根节点，检查路径上的每一个祖先节点的平衡因子。一旦发现某个节点变得不平衡（平衡因子为 2 或 -2），就需要通过旋转来修复。</p>
<p>旋转操作有四种基本类型，可以分为两组对称的操作：</p>
<ol>
<li>左旋</li>
</ol>
<p>使用场景：当一个节点的右子树比左子树高太多（平衡因子 = -2），并且其右子树的右子树较高导致失衡（即“右右”情况）。</p>
<p>操作描述：</p>
<ol>
<li>将失衡节点（A）的右孩子（B）提升为新的子树根节点。</li>
<li>原根节点（A）成为新根节点（B）的左孩子。</li>
<li>新根节点（B）原来的左孩子（β）成为原根节点（A）的右孩子。</li>
</ol>
<p>效果：就像把树向左拧了一下，降低了右子树的高度。</p>
<p>好的，我们来详细讲解 AVL 树的插入与删除操作，并提供完整的 C++ 实现代码。</p>
<hr>
<h2 id="%E4%BB%80%E4%B9%88%E6%98%AF-avl-%E6%A0%91%EF%BC%9F" tabindex="-1">什么是 AVL 树？</h2>
<p>AVL 树是最早被发明的自平衡二叉搜索树（Self-Balancing Binary Search Tree）。它的核心特点是：<strong>树中任何节点的两个子树的高度差最多为 1</strong>。</p>
<p>这个高度差被称为<strong>平衡因子（Balance Factor）</strong>。</p>
<pre><code>平衡因子 = 左子树高度 - 右子树高度
</code></pre>
<p>一个合法的 AVL 树中，所有节点的平衡因子只能是 <strong>-1、0 或 1</strong>。如果任何节点的平衡因子的绝对值大于 1（即为 -2 或 +2），则该树就失去了平衡，需要通过<strong>旋转</strong>操作来恢复平衡。</p>
<p>这个特性保证了树的高度维持在 O(logn) 级别，从而使得搜索、插入和删除操作的时间复杂度也保持在 O(logn)。</p>
<h2 id="%E6%A0%B8%E5%BF%83%E6%93%8D%E4%BD%9C%EF%BC%9A%E6%97%8B%E8%BD%AC" tabindex="-1">核心操作：旋转</h2>
<p>旋转是 AVL 树维持平衡的关键。当插入或删除一个节点导致某个祖先节点的平衡因子变为 -2 或 +2 时，就需要进行旋转。主要有四种失衡情况，对应两种单旋转和两种双旋转。</p>
<p>假设失衡的节点为 <code>z</code>。</p>
<h3 id="1.-%E5%B7%A6-%E5%B7%A6%EF%BC%88ll%EF%BC%89%E6%83%85%E5%86%B5%EF%BC%9A%E5%8F%B3%E6%97%8B" tabindex="-1">1. 左-左（LL）情况：右旋</h3>
<ul>
<li><strong>失衡原因</strong>：在新节点插入到 <code>z</code> 的<strong>左子树</strong>的<strong>左子树</strong>之后，<code>z</code> 的平衡因子变为 +2。</li>
<li><strong>解决方法</strong>：对 <code>z</code> 进行一次<strong>右旋</strong>。</li>
</ul>
<pre><code>      z (+2)              y (0)
     / \                 /   \
    y (+1)      -&gt;      x     z
   / \                 / \   / \
  x   T3              T1 T2 T3 T4
 / \
T1 T2
</code></pre>
<h3 id="2.-%E5%8F%B3-%E5%8F%B3%EF%BC%88rr%EF%BC%89%E6%83%85%E5%86%B5%EF%BC%9A%E5%B7%A6%E6%97%8B" tabindex="-1">2. 右-右（RR）情况：左旋</h3>
<ul>
<li><strong>失衡原因</strong>：在新节点插入到 <code>z</code> 的<strong>右子树</strong>的<strong>右子树</strong>之后，<code>z</code> 的平衡因子变为 -2。</li>
<li><strong>解决方法</strong>：对 <code>z</code> 进行一次<strong>左旋</strong>。</li>
</ul>
<pre><code>    z (-2)                y (0)
   / \                   /   \
  T1  y (-1)     -&gt;     z     x
     / \                 / \   / \
    T2  x               T1 T2 T3 T4
       / \
      T3 T4
</code></pre>
<h3 id="3.-%E5%B7%A6-%E5%8F%B3%EF%BC%88lr%EF%BC%89%E6%83%85%E5%86%B5%EF%BC%9A%E5%85%88%E5%B7%A6%E6%97%8B%E5%90%8E%E5%8F%B3%E6%97%8B" tabindex="-1">3. 左-右（LR）情况：先左旋后右旋</h3>
<ul>
<li><strong>失衡原因</strong>：在新节点插入到 <code>z</code> 的<strong>左子树</strong>的<strong>右子树</strong>之后，<code>z</code> 的平衡因子变为 +2。</li>
<li><strong>解决方法</strong>：
<ol>
<li>先对 <code>z</code> 的左孩子 <code>y</code> 进行<strong>左旋</strong>。</li>
<li>再对 <code>z</code> 本身进行<strong>右旋</strong>。</li>
</ol>
</li>
</ul>
<pre><code>      z (+2)                z (+2)                  x
     / \                   / \                     /  \
    y (-1)      (1) 左旋 y   x        (2) 右旋 z     y    z
   / \          ------&gt;   / \        ------&gt;     / \  / \
  T1  x                  y   T3                T1 T2 T3 T4
     / \                / \
    T2 T3              T1 T2
</code></pre>
<h3 id="4.-%E5%8F%B3-%E5%B7%A6%EF%BC%88rl%EF%BC%89%E6%83%85%E5%86%B5%EF%BC%9A%E5%85%88%E5%8F%B3%E6%97%8B%E5%90%8E%E5%B7%A6%E6%97%8B" tabindex="-1">4. 右-左（RL）情况：先右旋后左旋</h3>
<ul>
<li><strong>失衡原因</strong>：在新节点插入到 <code>z</code> 的<strong>右子树</strong>的<strong>左子树</strong>之后，<code>z</code> 的平衡因子变为 -2。</li>
<li><strong>解决方法</strong>：
<ol>
<li>先对 <code>z</code> 的右孩子 <code>y</code> 进行<strong>右旋</strong>。</li>
<li>再对 <code>z</code> 本身进行<strong>左旋</strong>。</li>
</ol>
</li>
</ul>
<pre><code>    z (-2)              z (-2)                    x
   / \                 / \                       /   \
  T1  y (+1)  (1) 右旋 y x          (2) 左旋 z   z     y
     / \      ------&gt;   / \          ------&gt;   / \   / \
    x   T4             T2  y                  T1 T2 T3 T4
   / \                    / \
  T2 T3                  T3 T4
</code></pre>
<hr>
<h2 id="avl-%E6%A0%91%E7%9A%84%E6%8F%92%E5%85%A5%E6%93%8D%E4%BD%9C" tabindex="-1">AVL 树的插入操作</h2>
<p>插入操作的步骤如下：</p>
<ol>
<li><strong>执行标准二叉搜索树（BST）的插入</strong>：从根节点开始，找到合适的位置插入新节点。</li>
<li><strong>更新高度</strong>：从新插入的节点开始，向上回溯到根节点，更新路径上所有祖先节点的高度。</li>
<li><strong>检查平衡并旋转</strong>：在回溯的每一步，计算当前节点的平衡因子。
<ul>
<li>如果平衡因子的绝对值大于 1，说明树在当前节点失衡。</li>
<li>根据上面描述的四种情况（LL, RR, LR, RL）进行相应的旋转操作来恢复平衡。</li>
<li><strong>注意</strong>：对于插入操作，一旦完成一次旋转，整个树就恢复了平衡，回溯过程可以停止。</li>
</ul>
</li>
</ol>
<h2 id="avl-%E6%A0%91%E7%9A%84%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C" tabindex="-1">AVL 树的删除操作</h2>
<p>删除操作比插入更复杂一些，因为一次删除可能导致路径上多个节点失衡。</p>
<ol>
<li><strong>执行标准二叉搜索树（BST）的删除</strong>：
<ul>
<li><strong>情况1：被删除节点是叶子节点</strong>：直接删除。</li>
<li><strong>情况2：被删除节点只有一个孩子</strong>：用其孩子节点替换它。</li>
<li><strong>情况3：被删除节点有两个孩子</strong>：找到它的<strong>中序后继</strong>（右子树中最小的节点），用后继节点的值替换当前节点的值，然后递归地删除那个后继节点（后继节点最多只有一个右孩子，转化为情况1或2）。</li>
</ul>
</li>
<li><strong>更新高度</strong>：从被删除节点的父节点开始，向上回溯到根节点，更新路径上所有祖先节点的高度。</li>
<li><strong>检查平衡并旋转</strong>：在回溯的每一步，检查当前节点的平衡因子。
<ul>
<li>如果发现失衡（平衡因子为 -2 或 +2），则进行相应的旋转。</li>
<li><strong>注意</strong>：与插入不同，删除操作在进行一次旋转后，可能导致更高层的祖先节点也失衡。因此，<strong>必须继续向上回溯，直到根节点</strong>，检查并修正所有可能的失衡。</li>
</ul>
</li>
</ol>
<hr>
<h2 id="c%2B%2B-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0" tabindex="-1">C++ 代码实现</h2>
<p>下面是一个完整的 AVL 树的 C++ 实现，包括插入、删除和打印功能。</p>
<p>C++</p>
<pre><code>#include &lt;iostream&gt;
#include &lt;algorithm&gt; // for std::max

// AVL 树节点结构
struct Node {
    int key;
    Node* left;
    Node* right;
    int height;
};

// 获取节点高度的辅助函数
int height(Node* n) {
    if (n == nullptr)
        return 0;
    return n-&gt;height;
}

// 创建新节点的辅助函数
Node* newNode(int key) {
    Node* node = new Node();
    node-&gt;key = key;
    node-&gt;left = nullptr;
    node-&gt;right = nullptr;
    node-&gt;height = 1; // 新节点初始高度为1
    return node;
}

// 右旋操作 (对应 LL 情况)
// y 是失衡的节点
Node* rightRotate(Node* y) {
    Node* x = y-&gt;left;
    Node* T2 = x-&gt;right;

    // 执行旋转
    x-&gt;right = y;
    y-&gt;left = T2;

    // 更新高度
    y-&gt;height = std::max(height(y-&gt;left), height(y-&gt;right)) + 1;
    x-&gt;height = std::max(height(x-&gt;left), height(x-&gt;right)) + 1;

    // 返回新的根节点
    return x;
}

// 左旋操作 (对应 RR 情况)
// x 是失衡的节点
Node* leftRotate(Node* x) {
    Node* y = x-&gt;right;
    Node* T2 = y-&gt;left;

    // 执行旋转
    y-&gt;left = x;
    x-&gt;right = T2;

    // 更新高度
    x-&gt;height = std::max(height(x-&gt;left), height(x-&gt;right)) + 1;
    y-&gt;height = std::max(height(y-&gt;left), height(y-&gt;right)) + 1;

    // 返回新的根节点
    return y;
}

// 获取节点的平衡因子
int getBalance(Node* n) {
    if (n == nullptr)
        return 0;
    return height(n-&gt;left) - height(n-&gt;right);
}

// 插入函数
Node* insert(Node* node, int key) {
    // 1. 执行标准BST插入
    if (node == nullptr)
        return newNode(key);

    if (key &lt; node-&gt;key)
        node-&gt;left = insert(node-&gt;left, key);
    else if (key &gt; node-&gt;key)
        node-&gt;right = insert(node-&gt;right, key);
    else // 不允许插入重复的键
        return node;

    // 2. 更新祖先节点的高度
    node-&gt;height = 1 + std::max(height(node-&gt;left), height(node-&gt;right));

    // 3. 获取平衡因子，检查是否失衡
    int balance = getBalance(node);

    // 4. 如果失衡，有四种情况

    // 左-左 (LL) 情况
    if (balance &gt; 1 &amp;&amp; key &lt; node-&gt;left-&gt;key) {
        return rightRotate(node);
    }

    // 右-右 (RR) 情况
    if (balance &lt; -1 &amp;&amp; key &gt; node-&gt;right-&gt;key) {
        return leftRotate(node);
    }

    // 左-右 (LR) 情况
    if (balance &gt; 1 &amp;&amp; key &gt; node-&gt;left-&gt;key) {
        node-&gt;left = leftRotate(node-&gt;left);
        return rightRotate(node);
    }

    // 右-左 (RL) 情况
    if (balance &lt; -1 &amp;&amp; key &lt; node-&gt;right-&gt;key) {
        node-&gt;right = rightRotate(node-&gt;right);
        return leftRotate(node);
    }

    // 如果没有失衡，返回原节点
    return node;
}

// 寻找中序后继 (右子树中最小的节点)
Node* minValueNode(Node* node) {
    Node* current = node;
    while (current-&gt;left != nullptr)
        current = current-&gt;left;
    return current;
}

// 删除函数
Node* deleteNode(Node* root, int key) {
    // 1. 执行标准BST删除
    if (root == nullptr)
        return root;

    if (key &lt; root-&gt;key)
        root-&gt;left = deleteNode(root-&gt;left, key);
    else if (key &gt; root-&gt;key)
        root-&gt;right = deleteNode(root-&gt;right, key);
    else {
        // 找到了要删除的节点
        // 情况 1 &amp; 2: 节点有一个或没有孩子
        if ((root-&gt;left == nullptr) || (root-&gt;right == nullptr)) {
            Node* temp = root-&gt;left ? root-&gt;left : root-&gt;right;
            // 没有孩子
            if (temp == nullptr) {
                temp = root;
                root = nullptr;
            } else { // 一个孩子
                *root = *temp; // 拷贝内容
            }
            delete temp;
        } else {
            // 情况 3: 节点有两个孩子
            // 获取中序后继
            Node* temp = minValueNode(root-&gt;right);
            // 拷贝后继节点的值到当前节点
            root-&gt;key = temp-&gt;key;
            // 删除那个后继节点
            root-&gt;right = deleteNode(root-&gt;right, temp-&gt;key);
        }
    }

    // 如果删除后树为空 (比如树只有一个节点)
    if (root == nullptr)
        return root;

    // 2. 更新当前节点的高度
    root-&gt;height = 1 + std::max(height(root-&gt;left), height(root-&gt;right));

    // 3. 获取平衡因子，检查是否失衡
    int balance = getBalance(root);

    // 4. 如果失衡，有四种情况 (与插入类似，但判断条件不同)

    // 左-左 (LL) 情况
    if (balance &gt; 1 &amp;&amp; getBalance(root-&gt;left) &gt;= 0) {
        return rightRotate(root);
    }

    // 左-右 (LR) 情况
    if (balance &gt; 1 &amp;&amp; getBalance(root-&gt;left) &lt; 0) {
        root-&gt;left = leftRotate(root-&gt;left);
        return rightRotate(root);
    }

    // 右-右 (RR) 情况
    if (balance &lt; -1 &amp;&amp; getBalance(root-&gt;right) &lt;= 0) {
        return leftRotate(root);
    }

    // 右-左 (RL) 情况
    if (balance &lt; -1 &amp;&amp; getBalance(root-&gt;right) &gt; 0) {
        root-&gt;right = rightRotate(root-&gt;right);
        return leftRotate(root);
    }

    return root;
}

// 打印树 (前序遍历)
void preOrder(Node* root) {
    if (root != nullptr) {
        std::cout &lt;&lt; root-&gt;key &lt;&lt; &quot; &quot;;
        preOrder(root-&gt;left);
        preOrder(root-&gt;right);
    }
}

int main() {
    Node* root = nullptr;

    // 插入操作
    std::cout &lt;&lt; &quot;Inserting nodes: 10, 20, 30, 40, 50, 25&quot; &lt;&lt; std::endl;
    root = insert(root, 10);
    root = insert(root, 20);
    root = insert(root, 30);
    root = insert(root, 40);
    root = insert(root, 50);
    root = insert(root, 25); // 这会触发一次 RL 旋转

    /*
     * 插入过程:
     * 10, 20, 30 (RR旋转) -&gt; 20, 10, 30
     * 40, 50 (RR旋转) -&gt; 30, 20, 40 -&gt; ... -&gt; 最终形态
     * 25 (RL旋转) -&gt; ...
     *
     * 最终插入后的树 (前序遍历): 30 20 10 25 40 50
     */
    std::cout &lt;&lt; &quot;Preorder traversal of the constructed AVL tree is: &quot;;
    preOrder(root);
    std::cout &lt;&lt; std::endl &lt;&lt; std::endl;

    // 删除操作
    std::cout &lt;&lt; &quot;Deleting node 10&quot; &lt;&lt; std::endl;
    root = deleteNode(root, 10);
    /*
     * 删除10后的树 (前序遍历): 30 20 25 40 50
     */
    std::cout &lt;&lt; &quot;Preorder traversal after deletion of 10: &quot;;
    preOrder(root);
    std::cout &lt;&lt; std::endl;

    std::cout &lt;&lt; &quot;Deleting node 40&quot; &lt;&lt; std::endl;
    root = deleteNode(root, 40);
     /*
     * 删除40后的树 (前序遍历): 30 20 25 50
     */
    std::cout &lt;&lt; &quot;Preorder traversal after deletion of 40: &quot;;
    preOrder(root);
    std::cout &lt;&lt; std::endl;

    return 0;
}
</code></pre>
<h2 id="%E4%BB%A3%E7%A0%81%E8%AE%B2%E8%A7%A3" tabindex="-1">代码讲解</h2>
<ol>
<li><strong>Node 结构体</strong>：除了常规的 <code>key</code>, <code>left</code>, <code>right</code> 指针外，多了一个 <code>height</code> 成员来存储以该节点为根的子树的高度。</li>
<li><strong><code>height()</code> 函数</strong>：一个安全的获取高度的函数，将 <code>nullptr</code> 的高度视为 0（在严格定义中，空树高度为-1，叶子为0，但为了方便计算，这里将空树高度设为0，叶子高度设为1，不影响平衡因子的计算）。</li>
<li><strong>旋转函数</strong>：<code>rightRotate</code> 和 <code>leftRotate</code> 是核心。它们通过改变指针来调整子树结构，并在操作后更新受影响节点的高度。</li>
<li><strong><code>getBalance()</code> 函数</strong>：直接通过左右子树的高度差计算平衡因子。</li>
<li><strong><code>insert()</code> 函数</strong>：
<ul>
<li>递归地找到插入位置。</li>
<li>在递归返回时，更新路径上节点的高度。</li>
<li>计算平衡因子并检查是否需要旋转。</li>
<li>旋转的判断条件是关键：
<ul>
<li><code>balance &gt; 1</code> 表示左子树过高。如果新 <code>key</code> 小于左孩子的 <code>key</code>，说明插在了左孩子的左边（LL），否则插在了右边（LR）。</li>
<li><code>balance &lt; -1</code> 表示右子树过高。如果新 <code>key</code> 大于右孩子的 <code>key</code>，说明插在了右孩子的右边（RR），否则插在了左边（RL）。</li>
</ul>
</li>
</ul>
</li>
<li><strong><code>deleteNode()</code> 函数</strong>：
<ul>
<li>同样递归地找到要删除的节点并执行标准的BST删除。</li>
<li>在递归返回时，更新高度并检查平衡。</li>
<li>旋转的判断条件与插入略有不同，它不依赖于被删除的 <code>key</code>，而是依赖于<strong>当前失衡节点的子节点的平衡因子</strong>。
<ul>
<li><code>balance &gt; 1</code> (左重): 如果左孩子的平衡因子 <code>&gt;= 0</code>，说明左孩子的左子树更高或等高，是LL情况。如果左孩子平衡因子 <code>&lt; 0</code>，说明左孩子的右子树更高，是LR情况。</li>
<li><code>balance &lt; -1</code> (右重): 逻辑与上面对称。</li>
</ul>
</li>
</ul>
</li>
</ol>

</div> 
    </div>

</article>

    </main>
    
    <footer class="site-footer">
    <div class="footer-content">
        <p>&copy; 2025 rainboy. All rights reserved. last build time 2025/11/27 21:17:02</p>
        <p class="license">内容遵循 <a style="text-decoration:none;" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
            <img decoding="async" loading="lazy" src="/ccbyncsa.png" width="65" height="auto" style="display:inline-block;">
        </a> 协议</p>
        <p class="powered-by">Powered by <a href="https://github.com/rainboyOJ/rbook_nunjucks" target="_blank"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTIgMkExMCAxMCAwIDAgMCAyIDEyYzAgNC40MiAyLjg3IDguMTcgNi44NCA5LjVjLjUuMDguNjYtLjIzLjY2LS41di0xLjY5Yy0yLjc3LjYtMy4zNi0xLjM0LTMuMzYtMS4zNGMtLjQ2LTEuMTYtMS4xMS0xLjQ3LTEuMTEtMS40N2MtLjkxLS42Mi4wNy0uNi4wNy0uNmMxIC4wNyAxLjUzIDEuMDMgMS41MyAxLjAzYy44NyAxLjUyIDIuMzQgMS4wNyAyLjkxLjgzYy4wOS0uNjUuMzUtMS4wOS42My0xLjM0Yy0yLjIyLS4yNS00LjU1LTEuMTEtNC41NS00LjkyYzAtMS4xMS4zOC0yIDEuMDMtMi43MWMtLjEtLjI1LS40NS0xLjI5LjEtMi42NGMwIDAgLjg0LS4yNyAyLjc1IDEuMDJjLjc5LS4yMiAxLjY1LS4zMyAyLjUtLjMzczEuNzEuMTEgMi41LjMzYzEuOTEtMS4yOSAyLjc1LTEuMDIgMi43NS0xLjAyYy41NSAxLjM1LjIgMi4zOS4xIDIuNjRjLjY1LjcxIDEuMDMgMS42IDEuMDMgMi43MWMwIDMuODItMi4zNCA0LjY2LTQuNTcgNC45MWMuMzYuMzEuNjkuOTIuNjkgMS44NVYyMWMwIC4yNy4xNi41OS42Ny41QzE5LjE0IDIwLjE2IDIyIDE2LjQyIDIyIDEyQTEwIDEwIDAgMCAwIDEyIDIiLz48L3N2Zz4="/>
         rbook</a></p>
    </div>
</footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> 
    <script src="/assets/js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/heti/0.9.6/heti-addon.min.js" integrity="sha512-GChf2qekcjrSoPicCypQLPqkaZkEnkcsJr85AmkczY0HG5SkfbxOmZY6RoFJLdoeKTGk8EZvkRBaF7BIqV1Ipw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        //const heti = new Heti('.heti');
        // error 自动挤压,增加空格 在Katex 公式中
        //heti.autoSpacing(); // 自动进行中西文混排美化和标点挤压
    </script>
</body>
</html>