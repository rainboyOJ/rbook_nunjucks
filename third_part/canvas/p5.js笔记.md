# p5.js 学习笔记

p5.js 是一个为艺术家、设计师、教育工作者和初学者准备的 JavaScript 创意编程库。它以处理和可视化的方式，让编码变得易于访问和包容。

官网链接：[p5js.org](https://p5js.org/zh-Hans/)

- [官方文档](https://p5js.org/zh-Hans/reference/)

---

## 如何开始使用 p5.js？

使用 p5.js 非常简单，你只需要一个 HTML 文件和一个 JavaScript 文件。

#### 1. HTML 文件 (`index.html`)

这是你的网页骨架。你需要引入 p5.js 库，并链接到你自己的 sketch 文件（例如 `sketch.js`）。

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>p5.js 入门</title>
    <!-- 引入 p5.js 库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <!-- 链接到你的 sketch 文件 -->
    <script src="sketch.js"></script>
</head>
<body>
</body>
</html>
```
> **注意:** 在您的项目中，p5.js 库存放在 `third_part/canvas/libraries/p5.min.js`，您可以将 `src` 路径替换为本地路径。

#### 2. JavaScript 文件 (`sketch.js`)

这是你编写创意代码的地方。p5.js 程序的核心是两个特殊的函数：`setup()` 和 `draw()`。

- `setup()`: 此函数在程序开始时运行一次，通常用于设置初始环境，如创建画布、设置颜色模式等。
- `draw()`: 此函数在 `setup()` 之后被反复调用（默认每秒60次），是所有动画和交互发生的主要场所。

```javascript
// setup() 函数：程序开始时执行一次
function setup() {
  // 创建一个 400x400 像素的画布
  createCanvas(400, 400);
}

// draw() 函数：在 setup() 后反复执行
function draw() {
  // 设置背景色为浅灰色
  background(220);
  // 在画布中心画一个圆形
  // ellipse(x, y, width, height)
  ellipse(200, 200, 50, 50);
}
```

将这两个文件放在同一个文件夹下，用浏览器打开 `index.html`，你就能看到一个浅灰色背景下的圆形。

---

## 常用 API 概览

p5.js 提供了丰富而直观的 API。以下是一些最常用的函数分类：

### 结构 (Structure)

- `setup()`: 初始化函数，运行一次。
- `draw()`: 绘图函数，循环执行。
- `noLoop()`: 停止 `draw()` 的循环。
- `loop()`: 重新开始 `draw()` 的循环。
- `redraw()`: 使 `draw()` 函数执行一次。

### 画布 (Canvas)

- `createCanvas(width, height)`: 创建一个画布。
- `background(color)`: 设置画布的背景色。可以是灰度值 (0-255)，也可以是 `background(R, G, B)` 或 CSS 颜色字符串。

### 颜色 (Color)

- `fill(color)`: 设置图形的填充色。
- `noFill()`: 禁用图形填充。
- `stroke(color)`: 设置图形的描边（轮廓）颜色。
- `noStroke()`: 禁用图形描边。
- `strokeWeight(pixels)`: 设置描边的宽度。

### 2D 图形 (2D Primitives)

- `point(x, y)`: 画一个点。
- `line(x1, y1, x2, y2)`: 画一条线。
- `rect(x, y, width, height)`: 画一个矩形。默认从左上角开始绘制。
- `ellipse(x, y, width, height)`: 画一个椭圆或圆形。默认从中心开始绘制。
- `triangle(x1, y1, x2, y2, x3, y3)`: 画一个三角形。
- `quad(x1, y1, x2, y2, x3, y3, x4, y4)`: 画一个四边形。

### 交互 (Input)

- `mouseX`, `mouseY`: 内置变量，存储鼠标当前的 x 和 y 坐标。
- `pmouseX`, `pmouseY`: 内置变量，存储鼠标上一帧的 x 和 y 坐标。
- `mouseIsPressed`: 内置布尔变量，如果鼠标被按下则为 `true`。
- `keyIsPressed`: 内置布尔变量，如果键盘按键被按下则为 `true`。
- `key`: 内置变量，存储最近按下的键值。
- `keyCode`: 内置变量，存储最近按下键的编码（例如 `UP_ARROW`, `LEFT_ARROW`）。
- `mouseClicked()`: 当鼠标点击时执行的回调函数。
- `keyPressed()`: 当键盘按下时执行的回调函数。

### 坐标变换 (Transform)

- `translate(x, y)`: 平移坐标系。将原点 (0,0) 移动到 `(x, y)`。
- `rotate(angle)`: 旋转坐标系。角度以弧度为单位。
- `scale(s)`: 缩放坐标系。`scale(2)` 会让所有东西放大一倍。
- `push()`: 保存当前的绘图设置和变换状态。
- `pop()`: 恢复到上一个 `push()` 时保存的状态。`push()` 和 `pop()` 通常成对使用，以隔离变换效果。

### 数学 (Math)

- `random(min, max)`: 生成一个随机数。
- `map(value, start1, stop1, start2, stop2)`: 将一个值从一个范围映射到另一个范围。
- `dist(x1, y1, x2, y2)`: 计算两点之间的距离。
- `constrain(value, min, max)`: 限制一个值在某个范围内。

### 文字 (Typography)

- `text(string, x, y)`: 在屏幕上显示文字。
- `textSize(size)`: 设置文字大小。
- `textAlign(alignX, [alignY])`: 设置文字对齐方式（如 `CENTER`, `LEFT`）。

---

这是一个基础的入门笔记，希望能帮助你快速开始使用 p5.js 进行创意编程！


- `createGraphics`
- `image`
- `myGraphics.remove()`
- `createFramebuffer`
