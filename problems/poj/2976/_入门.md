## Q 1



> 我想要通过这个题目 学会01分数规划 ,你来教会我

## AI

很高兴和你一起探索 **01分数规划 (01 Fractional Programming)**！🎯 这是一种非常优雅的算法技巧，专门用来解决这种“在给定约束下，求比率（分式）最大值”的问题。

这类问题的核心难点在于：分子的和与分母的和都在变化，且它们之间不是独立的。仅仅选择单次平均分最高的考试并不一定能得到最高的总累计平均分。

为了解决这个问题，我们需要转换一下思维方式。与其直接“计算”最大值，不如我们来“猜”这个最大值是多少，然后去验证它。这就涉及到了 **二分答案 (Binary Search)** 的思想。

假设我们要验证一个具体的平均分数值  $x$  是否可以达到（或者超过）。这意味着我们需要在  $n$  次考试中选出  $n-k$  次，使得这  $n-k$  次考试组成的集合  $S$  满足：

$$
\frac{\sum_{i\in S} a_{i}}{\sum_{i\in S} b_{i}}\ge x
$$

这个不等式是解题的关键。

**现在，我想请你试着做一个简单的代数变形：**

你能把上面的不等式中的分母乘到右边，然后把所有项都移到左边，并按每门考试  $i$  把它整理成  $∑\left(\dots \right)\ge 0$  的形式吗？这一步变形是 01分数规划 的“灵魂”所在！✨

##   Usr

$$
\frac{\sum a\_i}{\sum b\_i} \geqslant x \\

\frac{\sum a\_i}{\sum b\_i} - x\geqslant 0 \\

\frac{\sum a\_i - x\sum b\_i}{\sum b\_i} \geqslant 0 \\

\frac{\sum (a\_i - x b\_i)}{\sum b\_i} \geqslant 0 \\

\sum (a\_i - x b\_i) \geqslant 0 \\
$$

我得到公式如上

## AI

太棒了！你的推导完全正确。👏

这一步变形确实是解题的核心。它告诉我们：验证一个平均分  $x$  是否可行，等价于验证是否存在一组选择方案，使得新数值  $a_{i}-x\cdot b_{i}$  的总和非负。

现在，让我们把这个数学推导和我们的算法结合起来。

我们在二分答案的过程中，每一轮都会假设一个  $x$  值。根据你的推导，对于每一门考试，我们都可以算出一个新的“权重值”：

$$
v_{i}=a_{i}-x\cdot b_{i}
$$

为了让选出来的  $n-k$  门考试的总和  $∑v_{i}$  尽可能大（也就是最有可能  $\ge 0$ ），面对这一排计算出来的  $v_{i}$  值，你应该采取什么样的策略来选择这保留下来的  $n-k$  门课呢？

## usr

使用排序,把数值 \$v\_i\$ 从大到小牌, 然后近可能选大的值

## AI:

完全正确！🎯 你的直觉非常敏锐。

既然我们要判断是否存在某种选法让  $∑\left(a_{i}-x\cdot b_{i}\right)\ge 0$ ，那么贪心地选取最大的  $n-k$  个  $v_{i}$  值求和，就是能让这个总和最大的最好办法。

*   如果这最大的  $n-k$  个值的和都小于 0，那说明不论怎么选，都不可能达到平均分  $x$ ，我们需要尝试更小的  $x$ 。
*   如果和大于等于 0，说明  $x$  是可以达到的（甚至可能更高），我们可以尝试更大的  $x$ 。

这就是我们二分搜索中关键的 `check(x)` 函数的核心逻辑。

现在我们要把这个 `check` 函数放入二分搜索的框架中。为了开始二分，我们需要确定搜索区间  $\left[L,R\right]$ 。

**结合题目中定义的累计平均分公式  $100\cdot \frac{∑a_{i}}{∑b_{i}}$ ，你觉得我们要搜索的答案范围  $\left[L,R\right]$  应该是多少？**


