---
oj: "luogu"
problem_id: "P5049"
title: "[NOIP 2018 提高组] 旅行 加强版"
date: 2025-12-23 10:11
toc: true
tags: ["todo","基环树"]
desc: "核心: 回退旅行法一定最后是棵树"
source: https://www.luogu.com.cn/problem/P1000
---

[[TOC]]


- 不存在两条连接同一对城市的道路 无重边
- 也不存在一条连接一个城市和它本身的道路 无自环
- 从任意一个城市出发，通过这些道路都可以到达任意一个其他城市 连通
- 对于 100% 的数据和所有样例， 1≤n≤500000 且 m=n−1 或 m=n 。

m = n-1 就是一个树

n=m,是一个基环树


回退旅行法一定最后是棵树, 一定有一个有个条边没有走

- 简单想法: 枚举端口环上的边
- 枚举超时,优化
    - 找性质 : 只有最环上的时候才可能决定回退(不走某条边)
    - 想到性质: 贪心
    - 分情况讨论 + 对拍
