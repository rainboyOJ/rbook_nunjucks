<!DOCTYPE html>
<html lang="zh" data-darkmode="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的算法书 - [NOI2017] 游戏</title>
    <meta name="description" content="这是一本关于算法的书">
    <meta name="author" content="rainboy">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lxgw-wenkai-web/1.520.0/style.min.css" integrity="sha512-VqbHLQtJ5icD77Z4HH8NsrtoRJlTAkOKdSrymwYZtZ1Ipbit8L/Pp8RIeHS2vpNk2bVOszUUDotVl7sK403sjw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/markdown.css">
    <link rel="stylesheet" href="/prism-theme/prism-tomorrow.css">
</head>
<body>
    <aside class="panel">
    <ul class="panel-list">
      <li><a href="/"><i class="fa fa-home"></i></a></li>
      <li><a href="javascript:void(0);" onclick="showMenuModal()"><i class="fa fa-list"></i></a></li>
    </ul>
    <ul class="panel-list">
      <li><input type="radio" class="J_darkMode" value="auto" name="darkmode" id="darkmode-auto" checked=""><label for="darkmode-auto"><i class="fa fa-adjust"></i></label></li>
      <li><input type="radio" class="J_darkMode" value="light" name="darkmode" id="darkmode-light"><label for="darkmode-light"><i class="fa fa-sun-o"></i></label></li>
      <li><input type="radio" class="J_darkMode" value="dark" name="darkmode" id="darkmode-dark"><label for="darkmode-dark"><i class="fa fa-moon-o"></i></label></li>
    </ul>
  </aside>
    <div id="modal-menu" class="modal-menu" style="display:none;">
  <div class="modal-menu-mask" onclick="hideMenuModal()"></div>
  <div class="modal-menu-content">
    <button class="modal-menu-close" onclick="hideMenuModal()">×</button>
    <h2>目录</h2>
    
  </div>
</div>
<script>
function showMenuModal() {
  document.getElementById('modal-menu').style.display = 'block';
}
function hideMenuModal() {
  document.getElementById('modal-menu').style.display = 'none';
}
</script>

    <main>
        
<article class="page">
    <header class="container page-header">
        <h1>[NOI2017] 游戏</h1>
        <div class="problem-info">
          <div class="problem-tags">
            <span>标签:</span>
            
              <span>#2-sat</span>
            
              <span>#todo</span>
            
          </div>
          <div class="problem-source">
            <span>原题目:</span>
            <a href="https://www.luogu.com.cn/problem/P3825" target="_blank"> luogu-P3825</a>
          </div>
        </div>
        <div>
          <span>简要描述:</span>
          <span>核心: 把 2-sat 当作自动选择器使用</span>
        </div>
    </header>
    
    <div class="container">
        <div class="heti markdown-body">
    <nav class="table-of-contents"><ol><li><a href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E7%90%86%E8%A7%A3-2-sat-%E7%9A%84%E8%83%BD%E5%8A%9B">第一步：理解 2-SAT 的能力</a></li><li><a href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E4%BB%8E%E2%80%9C%E6%8C%87%E5%AE%9A%E5%80%BC%E2%80%9D%E5%88%B0%E2%80%9C%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E2%80%9D%E7%9A%84%E6%8E%A8%E5%AF%BC">第二步：从“指定值”到“指定范围”的推导</a><ol><li><a href="#%E4%BD%A0%E7%9A%84%E6%80%9D%E8%B7%AF%EF%BC%88%E6%9E%9A%E4%B8%BE%E5%85%B7%E4%BD%93%E5%80%BC%EF%BC%89%EF%BC%9A">你的思路（枚举具体值）：</a></li><li><a href="#%E8%BF%9B%E9%98%B6%E6%80%9D%E8%B7%AF%EF%BC%88%E6%9E%9A%E4%B8%BE%E6%90%9C%E7%B4%A2%E8%8C%83%E5%9B%B4%EF%BC%89%EF%BC%9A">进阶思路（枚举搜索范围）：</a></li><li><a href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E9%AA%8C%E8%AF%81%E2%80%9C%E8%A6%86%E7%9B%96%E2%80%9D%E6%98%AF%E5%90%A6%E5%AE%8C%E6%95%B4">第三步：验证“覆盖”是否完整</a></li></ol></li><li><a href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E7%9B%B4%E8%A7%82%E5%9B%BE%E8%A7%A3">第四步：直观图解</a></li><li><a href="#%E6%80%BB%E7%BB%93">总结</a></li></ol></nav><p>TODO: 添加代码</p>
<p>2-SAT 算法本身就是一个“自动选择器”. 你不需要告诉它“选谁”，你只需要给它一个**“允许选谁的范围”**，它自己会在范围内找到解。</p>
<p>你的困惑非常合理。你是在从 <strong>“赋值”</strong>（Assignment）的角度思考，而标准解法是从 <strong>“约束”</strong>（Constraint）的角度思考。</p>
<p><strong>你卡住的地方在于：</strong> 你认为要找到解，必须显式地告诉程序“这个位置选A”，或者“选B”，或者“选C”。
<strong>但其实：</strong> 2-SAT 算法本身就是一个“自动选择器”。你不需要告诉它“选谁”，你只需要给它一个**“允许选谁的范围”**，它自己会在范围内找到解。</p>
<p>为了让你从  的思路平滑过渡到 ，我们来看看这个思维推导过程。</p>
<hr>
<h3 id="%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E7%90%86%E8%A7%A3-2-sat-%E7%9A%84%E8%83%BD%E5%8A%9B" tabindex="-1">第一步：理解 2-SAT 的能力</h3>
<p>首先，我们要明确 <strong>2-SAT 算法到底在干什么</strong>。
当你把地图设为 （禁止 A）时，你并不是告诉程序“请选 B”或者“请选 C”。
你是在告诉程序：<strong>“我不允许你选 A，剩下的 B 和 C，你自己看着办。”</strong></p>
<ul>
<li>如果最优解是 B，2-SAT 会算出 B。</li>
<li>如果最优解是 C，2-SAT 会算出 C。</li>
<li><strong>关键点</strong>：在一个“禁止 A”的 2-SAT 模型里，它自动涵盖了对 B 和 C 的搜索。</li>
</ul>
<h3 id="%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E4%BB%8E%E2%80%9C%E6%8C%87%E5%AE%9A%E5%80%BC%E2%80%9D%E5%88%B0%E2%80%9C%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E2%80%9D%E7%9A%84%E6%8E%A8%E5%AF%BC" tabindex="-1">第二步：从“指定值”到“指定范围”的推导</h3>
<p>现在回到你的  思路。对于地图 ，真实答案可能是  中的一个。</p>
<h4>你的思路（枚举具体值）：</h4>
<ol>
<li><strong>假设 x = A</strong>：跑一遍检测。</li>
<li><strong>假设 x = B</strong>：跑一遍检测。</li>
<li><strong>假设 x = C</strong>：跑一遍检测。</li>
</ol>
<p>这是一个 <strong>“点”</strong> 的覆盖：你试图踩中那个正确的点。</p>
<h4>进阶思路（枚举搜索范围）：</h4>
<p>我们要利用 2-SAT 的能力，能不能把这三个点，通过**“范围”**来覆盖？</p>
<ul>
<li>
<p><strong>范围 1（假装地图是 a）</strong>：允许 。</p>
</li>
<li>
<p>这意味着：如果正确答案是 B，这个范围能搜到。</p>
</li>
<li>
<p>如果正确答案是 C，这个范围也能搜到。</p>
</li>
<li>
<p><em>（漏掉了 A）</em></p>
</li>
<li>
<p><strong>范围 2（假装地图是 b）</strong>：允许 。</p>
</li>
<li>
<p>这意味着：如果正确答案是 A，这个范围能搜到。</p>
</li>
<li>
<p>如果正确答案是 C，这个范围也能搜到。</p>
</li>
<li>
<p><em>（漏掉了 B）</em></p>
</li>
</ul>
<h4>第三步：验证“覆盖”是否完整</h4>
<p>现在我们把上面两个范围合起来看，能不能覆盖所有情况？</p>
<table>
<thead>
<tr>
<th>真实的最优解 (上帝视角)</th>
<th>范围 1 (禁A: ) 能搜到吗？</th>
<th>范围 2 (禁B: ) 能搜到吗？</th>
<th>结论</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>是 A</strong></td>
<td>❌ (A被禁了)</td>
<td>✅ (允许A)</td>
<td><strong>能找到！</strong> (在范围2中)</td>
</tr>
<tr>
<td><strong>是 B</strong></td>
<td>✅ (允许B)</td>
<td>❌ (B被禁了)</td>
<td><strong>能找到！</strong> (在范围1中)</td>
</tr>
<tr>
<td><strong>是 C</strong></td>
<td>✅ (允许C)</td>
<td>✅ (允许C)</td>
<td><strong>能找到！</strong> (两个都能)</td>
</tr>
</tbody>
</table>
<p><strong>看到了吗？</strong></p>
<ul>
<li>我们不需要第三种情况（假装地图是 c，即允许 ）。因为 A 已经被范围 2 覆盖了，B 已经被范围 1 覆盖了，C 已经被两者都覆盖了。</li>
<li>只要我们试了“范围 1”和“范围 2”，无论真理是 A、B 还是 C，它一定会在其中某一次尝试中“落网”。</li>
</ul>
<h3 id="%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E7%9B%B4%E8%A7%82%E5%9B%BE%E8%A7%A3" tabindex="-1">第四步：直观图解</h3>
<p>这就好比你要抓一个嫌疑人（正确答案），嫌疑人藏在 A、B、C 三个房间中的一个。</p>
<ul>
<li><strong>你的方法（3-SAT 思维）</strong>：</li>
</ul>
<ol>
<li>冲进房间 A 抓人。</li>
<li>冲进房间 B 抓人。</li>
<li>冲进房间 C 抓人。</li>
</ol>
<ul>
<li>
<p>(操作 3 次)</p>
</li>
<li>
<p><strong>2-SAT 优化方法</strong>：
如果你手头有一个搜查队（2-SAT 算法），它一次只能搜查两个房间。你怎么安排才能保证抓到人？</p>
</li>
</ul>
<ol>
<li><strong>第一次安排</strong>：命令搜查队搜查 <strong>{B, C}</strong>。</li>
</ol>
<ul>
<li>如果人在 B 或 C，搜查队就抓到了。</li>
</ul>
<ol start="2">
<li><strong>第二次安排</strong>：命令搜查队搜查 <strong>{A, C}</strong>。</li>
</ol>
<ul>
<li>如果人在 A 或 C，搜查队就抓到了。</li>
</ul>
<p><strong>结果</strong>：</p>
<ul>
<li>如果人在 A，第二次抓到了。</li>
<li>如果人在 B，第一次抓到了。</li>
<li>如果人在 C，两次都能抓到。</li>
</ul>
<p>你不需要单独派人去搜查“A和B”（即模拟地图 c），因为前两次行动已经覆盖了所有可能藏人的地点。</p>
<h3 id="%E6%80%BB%E7%BB%93" tabindex="-1">总结</h3>
<p>从“枚举 A,B,C”到“枚举地图 a,b”的推导逻辑链是：</p>
<ol>
<li><strong>2-SAT 的特性</strong>：给它两个选项，它能自动判断取哪个。</li>
<li><strong>目标转化</strong>：我们不需要帮 2-SAT 选定“具体是哪个车”，我们要给它一个 <strong>“包含正确答案的 2 选 1 环境”</strong>。</li>
<li><strong>集合覆盖</strong>：</li>
</ol>
<ul>
<li></li>
<li>全集  (地图a的范围)  (地图b的范围)</li>
</ul>
<p>所以，我们并没有丢失任何解，只是利用 2-SAT 的自动求解能力，把枚举量从 3 压缩到了 2。</p>

</div>

<script type="module">
  import { instance } from "/js/viz.js";

  // Viz.instance().then(viz => {
  //   document.body.appendChild(viz.renderSVGElement("digraph { a -> b }"))
  // });
  // 假设你通过 npm 安装并打包了，或者直接引用 CDN
  // 如果是本地文件: import { instance } from "./path/to/viz-js/index.js";
  // import { instance } from "https://cdn.jsdelivr.net/npm/@viz-js/viz@3.2.4/+esm";

  async function renderAllGraphs() {
    try {
      // 1. 初始化 Viz 实例 (加载 WASM)
      const viz = await instance();

      // 2. 选择所有需要渲染的代码块
      // markdown-it 默认生成 <pre><code class="language-dot">...</code></pre>
      const codes = document.querySelectorAll('pre.dot, pre.graphviz');

      // 3. 遍历并处理
      codes.forEach(codeElement => {
        const preElement = codeElement.parentElement; // 获取外层的 <pre>
        const sourceCode = codeElement.textContent;   // 获取 DOT 源码

        try {
          // 4. 渲染 SVG DOM 元素
          const svgElement = viz.renderSVGElement(sourceCode);

          // 5. 原位替换：用生成的 SVG 替换掉原本的 <pre> 标签
          // 这样图表就会出现在原本代码所在的位置
          codeElement.replaceWith(svgElement);

        } catch (renderError) {
          console.error("Graphviz 渲染失败:", renderError);

          // 可选：在页面上显示错误信息，而不是让它崩溃
          const errorDiv = document.createElement('div');
          errorDiv.className = 'viz-error';
          errorDiv.innerText = `渲染错误: ${renderError.message}`;
          preElement.replaceWith(errorDiv);
        }
      });

    } catch (err) {
      console.error("Viz 实例初始化失败:", err);
    }
  }

  // 执行渲染
  renderAllGraphs();
</script> 
    </div>

</article>

    </main>
    
    <footer class="site-footer">
    <div class="footer-content">
        <p>&copy; 2024 rainboy. All rights reserved. last build time </p>
        <p class="license">内容遵循 <a style="text-decoration:none;" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
            <img decoding="async" loading="lazy" src="/ccbyncsa.png" width="65" height="auto" style="display:inline-block;">
        </a> 协议</p>
        <p class="powered-by">Powered by <a href="https://github.com/rainboyOJ/rbook_nunjucks" target="_blank"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTIgMkExMCAxMCAwIDAgMCAyIDEyYzAgNC40MiAyLjg3IDguMTcgNi44NCA5LjVjLjUuMDguNjYtLjIzLjY2LS41di0xLjY5Yy0yLjc3LjYtMy4zNi0xLjM0LTMuMzYtMS4zNGMtLjQ2LTEuMTYtMS4xMS0xLjQ3LTEuMTEtMS40N2MtLjkxLS42Mi4wNy0uNi4wNy0uNmMxIC4wNyAxLjUzIDEuMDMgMS41MyAxLjAzYy44NyAxLjUyIDIuMzQgMS4wNyAyLjkxLjgzYy4wOS0uNjUuMzUtMS4wOS42My0xLjM0Yy0yLjIyLS4yNS00LjU1LTEuMTEtNC41NS00LjkyYzAtMS4xMS4zOC0yIDEuMDMtMi43MWMtLjEtLjI1LS40NS0xLjI5LjEtMi42NGMwIDAgLjg0LS4yNyAyLjc1IDEuMDJjLjc5LS4yMiAxLjY1LS4zMyAyLjUtLjMzczEuNzEuMTEgMi41LjMzYzEuOTEtMS4yOSAyLjc1LTEuMDIgMi43NS0xLjAyYy41NSAxLjM1LjIgMi4zOS4xIDIuNjRjLjY1LjcxIDEuMDMgMS42IDEuMDMgMi43MWMwIDMuODItMi4zNCA0LjY2LTQuNTcgNC45MWMuMzYuMzEuNjkuOTIuNjkgMS44NVYyMWMwIC4yNy4xNi41OS42Ny41QzE5LjE0IDIwLjE2IDIyIDE2LjQyIDIyIDEyQTEwIDEwIDAgMCAwIDEyIDIiLz48L3N2Zz4="/>
         rbook</a></p>
    </div>
</footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> 
    <script src="/assets/js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/heti/0.9.6/heti-addon.min.js" integrity="sha512-GChf2qekcjrSoPicCypQLPqkaZkEnkcsJr85AmkczY0HG5SkfbxOmZY6RoFJLdoeKTGk8EZvkRBaF7BIqV1Ipw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        //const heti = new Heti('.heti');
        // error 自动挤压,增加空格 在Katex 公式中
        //heti.autoSpacing(); // 自动进行中西文混排美化和标点挤压
    </script>
      <script type="module">
        import mermaid from 'https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.12.0/mermaid.esm.mjs';
        mermaid.initialize({ startOnLoad: true });
      </script>
</body>
</html>